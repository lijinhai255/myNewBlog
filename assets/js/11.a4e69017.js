(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{274:function(e,a,r){e.exports=r.p+"assets/img/Xnip2019-12-23_13-45-30.c465bd05.jpeg"},354:function(e,a,r){"use strict";r.r(a);var t=r(6),s=Object(t.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-hidden":"true"}},[e._v("#")]),e._v(" Docker")]),e._v(" "),t("h2",{attrs:{id:"docker指令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker指令","aria-hidden":"true"}},[e._v("#")]),e._v(" Docker指令")]),e._v(" "),t("div",{staticClass:"language-markdown extra-class"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[e._v("docker version\n\nsystemcil daemon-reload\nsystemcil restart docker\n\n// 拉去镜像\n\ndocker stop start restart \ndocker rm 文件名称\ndocker ps -a\ndocker run --name ljh-mysql -e MYSQL"),t("span",{pre:!0,attrs:{class:"token italic"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("_")]),t("span",{pre:!0,attrs:{class:"token content"}},[e._v("ROOT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("_")])]),e._v("PASSWORD=123456 -d mysql\ndocker run --name ljh-mysql -e MYSQL"),t("span",{pre:!0,attrs:{class:"token italic"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("_")]),t("span",{pre:!0,attrs:{class:"token content"}},[e._v("ROOT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("_")])]),e._v("PASSWORD=123456 -p 28001:3306 -d mysql\ndocker logs -f mysql\n\n")])])]),t("div",{staticClass:"language-markdown extra-class"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[e._v("start docker\nsudo systemctl start docker\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 更新所有\nyum -y update\n# 更新指定\nyum -y update docker-ce docker-ce-cli containerd.io\n\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo yum remove docker-ce\n# 删除文件系统\nsudo rm -rf /var/lib/docker\n\n")])])]),t("h2",{attrs:{id:"linux上docker安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux上docker安装","aria-hidden":"true"}},[e._v("#")]),e._v(" Linux上Docker安装")]),e._v(" "),t("h3",{attrs:{id:"centos中docker安装方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos中docker安装方法","aria-hidden":"true"}},[e._v("#")]),e._v(" Centos中Docker安装方法")]),e._v(" "),t("p",[t("a",{attrs:{href:"http://www.docker-cn.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker中文网:"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"http://www.docker-cn.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker 中国官方镜像加速："),t("OutboundLink")],1),e._v("registry-mirror")]),e._v(" "),t("ul",[t("li",[e._v("先删除旧的版本(如果没有可以跳过)")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n")])])]),t("ul",[t("li",[e._v("安装必须的依赖")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo yum install -y yum-utils \\\n  device-mapper-persistent-data \\\n  lvm2\n")])])]),t("p",[e._v("添加stable的Docker-ce的源：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\n\n")])])]),t("ul",[t("li",[e._v("安装docker-ce:")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo yum install docker-ce docker-ce-cli containerd.io\n\n")])])]),t("ul",[t("li",[e._v("安装中国镜像\n"),t("a",{attrs:{href:"https://mirrors.ustc.edu.cn/help/dockerhub.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中国科技大学"),t("OutboundLink")],1)])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(' /etc/docker/daemon.json\n\n{\n  "registry-mirrors": ["https://registry.docker-cn.com"]\n}\nsystemctl daemon-reload\nsystemctl restart docker\ndocker stop restart log\ndocker rm \ndocker logs -f lijinhai——mysql\n')])])]),t("h2",{attrs:{id:"安装dockercompose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装dockercompose","aria-hidden":"true"}},[e._v("#")]),e._v(" 安装DockerCompose")]),e._v(" "),t("ul",[t("li",[e._v("下载")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('sudo curl -L "https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\n\n')])])]),t("ul",[t("li",[e._v("修改权限")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('# 下载docker-compose\nsudo curl -L "https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\n# 给予执行权限\nsudo chmod +x /usr/local/bin/docker-compose\n# 测试命令\n$ docker-compose --version\ndocker-compose version 1.23.2, build 1110ad01\n\n')])])]),t("h2",{attrs:{id:"使用docker-compose-运行容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用docker-compose-运行容器","aria-hidden":"true"}},[e._v("#")]),e._v(" 使用docker-compose 运行容器")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("vi docker-compose.ymi 或者 vi docker-compose.yamlls\n")])])]),t("p",[e._v("添加指令")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("version: '3'\nservices:\n  mysql1:\n    image: mysql\n    environment:\n    - MYSQL_ROOT_PASSWORD=123456\n    ports:\n    - 28002:3306\n    \n  mysql2:\n    image: mysql\n    environment:\n    - MYSQL_ROOT_PASSWORD=123456\n    ports:\n    - 28003:3306  \n    \n")])])]),t("h2",{attrs:{id:"执行compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行compose","aria-hidden":"true"}},[e._v("#")]),e._v(" 执行compose")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker-compose up -d\ndocker-compose stop\ndocker-compose rm\n\n")])])]),t("h2",{attrs:{id:"dockerhup-使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerhup-使用","aria-hidden":"true"}},[e._v("#")]),e._v(" dockerhup 使用")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker login\n lijinhai255\n lijinhai12345\ndocker commit id(号) lijinhai255/mysql：1.0.1 \n")])])]),t("h2",{attrs:{id:"docker搭建mock数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker搭建mock数据","aria-hidden":"true"}},[e._v("#")]),e._v(" docker搭建Mock数据")]),e._v(" "),t("h3",{attrs:{id:"本地安装接口测试工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地安装接口测试工具","aria-hidden":"true"}},[e._v("#")]),e._v(" 本地安装接口测试工具")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/lijinhai255/DOClever",target:"_blank",rel:"noopener noreferrer"}},[e._v("DOClever"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/sx1989827/DOClever/tree/master/docker",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker安装Doclever"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('version: "2"\nservices:\n  DOClever:\n    image: lw96/doclever:latest-ubuntu\n    restart: always\n    container_name: "DOClever"\n    ports:\n    - 20080:10000\n    volumes:\n    - /srv/doclever/file:/root/DOClever/data/file\n    - /srv/doclever/img:/root/DOClever/data/img\n    - /srv/doclever/tmp:/root/DOClever/data/tmp\n    environment:\n    # - DB_HOST=mongodb://localhost:27017/DOClever\n    - PORT=10000\n    links:\n    - mongo:mongo\n \t\n  mongo:\n    image: mymongo\n    restart: always\n    container_name: "mongodb"\n    volumes:\n    - /srv/doclever/db:/data/db \n')])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('version: "2"\nservices:\n  DOClever:\n    image: lw96/doclever\n    restart: always\n    container_name: "DOClever"\n    ports:\n    - 10000:10000\n    volumes:\n    - /srv/doclever/file:/root/DOClever/data/file\n    - /srv/doclever/file:/root/DOClever/data/img\n    - /srv/doclever/file:/root/DOClever/data/tmp\n    environment:\n    - DB_HOST=mongodb://mongo:27017/DOClever\n    - PORT=10000\n    links:\n    - mongo:mongo\n\n  mongo:\n    image: mongo:latest\n    restart: always\n    container_name: "mongodb"\n    volumes:\n    - /srv/doclever/db:/data/db \n')])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker --version\ndocker-compose --version\n")])])]),t("h3",{attrs:{id:"创建doclever文件夹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建doclever文件夹","aria-hidden":"true"}},[e._v("#")]),e._v(" 创建doclever文件夹")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("mkdir doclever\ncd docker\nvi docker-compose.yml\nvi docker-compose.yaml\n")])])]),t("p",[t("img",{attrs:{src:r(274),alt:"tp"}})]),e._v(" "),t("h3",{attrs:{id:"放行防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#放行防火墙","aria-hidden":"true"}},[e._v("#")]),e._v(" 放行防火墙")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("firewall-cmd --state\nfirewall-cmd --list-all\nfirewall-cmd --zone=upblic --add-port=20080/tcp  --permanent\nfirewll-cmd --reload\nfirewall-cmd --list-all\nuf  // ubt\nLijinhai12345.\nDOClever\nadmin123\nhttp://111.231.107.222:20080/html/web/controller/admin/admin.html\n\nadmin\nadmin\n")])])])])},[],!1,null,null,null);a.default=s.exports}}]);